<html>
	<head>
		<script type="text/javascript">
		
			// temporary function to react to double click choice from listbox
			// This would call up edit page, or associate contact with patient
			function doSomething(theValue) { 
				alert(theValue);
			} 
			
			function bldInitial() {
	
				// Clear option list if no letters in text box
				document.forms[this.formname][this.selname].options.length = 0
				// Set focus to text entry box
				document.forms[this.formname][this.textname].focus();
			}
			
			function bldUpdate() {
				var str = document.forms[this.formname][this.textname].value.replace(/^\s*/,'');
				if(str == '') {
					this.bldInitial()
				}
				else {
					var j = 0;
					pattern = new RegExp("^"+str,"i");
					// go though contact set looking for matches
					for(var i = 0; i < this.contactSet.length; i++) {
						if(pattern.test(this.contactSet[i].surname)) {
							document.forms[this.formname][this.selname].options[j++] = 
							new Option(this.contactSet[i].surname, this.contactSet[i].value);
						}
						// remove the following two lines if the list is not ordered by its text
						else {
							if(j > 0) { 
								break;
							}
						}
					}
					document.forms[this.formname][this.selname].options.length=j;
				}
			}
			
			function setUp() {
				// Assign names of form objects and initialise
				// Allows functions to be used with elements of different names on same page
				this.formname = 'menuform';
				this.selname = 'namelist';
				this.textname = 'entry';
				this.bldInitial(); 
			}
			
			// Declare array of objects which contains list of last_names each with a value equal to contact_id;
			// Splitting data into surname and other allows search on surname only, but display of more detail
			// List must be in aphabetical order
			var contactSet = [
			{surname: 'Adams', other: ' ,Gill John Saunders Suite', value: '2'},
			{surname: 'Acheson', other: ' ,Rob', value: '9'},		
			{surname: 'Beare', other: ' ,John Queen Marys Hospital', value: '10'},
			{surname: 'Bedford', other: ' ,Jonathan Still & Bedford Optometrists', value: '4'},
			{surname: 'Cabral', other: ' ,Luis', value: '3'},	
			{surname: 'Dart', other: ' ,John Arthur Steele Unit', value: '7'},
			{surname: 'Hamilton', other: ' ,A M The London Clinic', value: '1'},
			{surname: 'Mitchell', other: ' ,Sue St Stephens Centre', value: '8'},
			{surname: 'Otty', other: ' ,CJ Albion Street Health Centre', value: '12'},
			{surname: 'Potamitis', other: ' ,Theo Pantheo Eye Centre', value: '11'},
			{surname: 'Skinner', other: ' ,Stephen Elm House', value: '5'},	
			{surname: 'Watkins', other: ' ,Lawrence National Hospital for Neurology', value: '6'}
			];
		
		</script>
	
		<title>Dummy page</title>
	</head>


	<body OnLoad="javascript:setUp()">
		<form name="menuform" action="http:\\www.google.com">
			<input type="text" name="entry" size="30" style="font-weight: bold" onKeyUp="javascript:bldUpdate();">
			<br \>
			<select name="namelist" size=10 style="width: 200px" onclick=doSomething(namelist.value)>
				<option>
			</select>
		</form>
	</body>
	
</html>