<!doctype html>
<html>
<head>
	<title>Eyedraw doodle popup menu prototype</title>

	<!-- This is the main OpenEyes stlesheet -->
	<link rel="stylesheet" type="text/css" href="css/style.css" />

	<!-- This is purely used for test/demo purposes -->
	<link rel="stylesheet" type="text/css" href="css/test.css" />

	<!-- The eyedraw widget stylesheet -->
	<!-- <link rel="stylesheet" type="text/css" href="../../../assets/css/oe-eyedraw.css" /> -->

	<!-- Other dependent scripts -->
	<script type="text/javascript" src="../../../assets/components/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="../../../assets/components/mustache/mustache.js"></script>
	<script type="text/javascript" src="../../../assets/components/eventemitter2/lib/eventemitter2.js"></script>

	<!-- Load in the eyedraw scripts -->
	<script>
	(function() {
		// We have to use 'jsonp' here so that we can run this test document on the
		// file:// protocol (ie, without the use of a webserver)
		this.scriptsLoadCallback = function(obj) {
			obj.files.forEach(function(file) {
				// We use document.write to force the files to be loaded synchronously.
				document.write('<script src="../../../src/' + file + '"><\/script>');
			});
		};
	}.call(this));
	</script>
	<script type="text/javascript" src="./js/scripts.jsonp"></script>
	<!-- End loading in eyedraw scripts -->
</head>
<body>
	<div class="container main" role="main">
		<div class="container content">
			<div class="large-12 column event edit">
				<header class="event-header">
					<ul class="inline-list tabs event-actions">
						<li class="selected">
							<a href="#">Create</a>
						</li>
					</ul>
				</header>
				<div class="event-content" id="event-content">
					<h2 class="event-title">Event title</h2>

					<!-- Anterior segment EDIT -->
					<section class="element Element_OphCiExamination_AnteriorSegment">
						<header class="element-header">
							<h3 class="element-title">Anterior Segment (edit mode)</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left" data-side="right">

								<div class="eyedraw-row">

									<!-- EYEDRAW WIDGET START -->
									<div class="ed-widget anterior-segment" id="eyedrawwidget_example">

										<!-- TOOLBAR START -->
										<div class="ed-toolbar">

											<!-- PANEL START -->
											<ul class="ed-toolbar-panel ed-main-toolbar">
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="NuclearCataract">
														<span class="icon-ed-NuclearCataract"></span>
														<span class="label">Nuclear cataract</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="CorticalCataract">
														<span class="icon-ed-CorticalCataract"></span>
														<span class="label">Cortical cataract</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="PostSubcapCataract">
														<span class="icon-ed-PostSubcapCataract"></span>
														<span class="label">Posterior subcapsular cataract</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="PCIOL">
														<span class="icon-ed-PCIOL"></span>
														<span class="label">Posterior chamber IOL</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="ACIOL">
														<span class="icon-ed-ACIOL"></span>
														<span class="label">Anterior chamber IOL</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="Bleb">
														<span class="icon-ed-Bleb"></span>
														<span class="label">Trabeculectomy bleb</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="PI">
														<span class="icon-ed-PI"></span>
														<span class="label">Peripheral iridectomy</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="Fuchs">
														<span class="icon-ed-Fuchs"></span>
														<span class="label">Fuchs endothelial dystrophy</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="RK">
														<span class="icon-ed-RK"></span>
														<span class="label">Radial keratotomy</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="LasikFlap">
														<span class="icon-ed-LasikFlap"></span>
														<span class="label">LASIK flap</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="CornealScar">
														<span class="icon-ed-CornealScar"></span>
														<span class="label">Corneal scar</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="SectorIridectomy">
														<span class="icon-ed-SectorIridectomy"></span>
														<span class="label">Sector iridectomy</span>
													</a>
												</li>
												<li>
													<a class="ed-button" href="#" data-function="addDoodle" data-arg="PosteriorSynechia">
														<span class="icon-ed-PosteriorSynechia"></span>
														<span class="label">Posterior synechia</span>
													</a>
												</li>
											</ul>
											<!-- PANEL END -->
										</div>
										<!-- TOOLBAR END -->

										<div class="ed-body">

											<div class="fixed column">

												<div class="ed-editor">

													<!-- CANVAS -->
													<div class="ed-canvas-container"></div>
													<canvas
													id="ed_example"
													class="ed-canvas-edit"
													width="300"
													height="300"
													tabindex="1">
													</canvas>

													<!-- CANVAS TOOLBAR -->
													<ul class="ed-toolbar-panel ed-canvas-toolbar">
														<li>
															<a class="ed-button" href="#" data-function="resetEyedraw">
																<span class="icon-ed-reset"></span>
																<span class="label">Reset eyedraw</span>
															</a>
														</li>
													</ul>

													<!-- DOODLE POPUP -->
													<div class="ed-doodle-popup closed">
													</div>

													<!-- DATA FIELD -->
													<input
														type="hidden"
														id="ed_example_data"
														value='' />
												</div>
											</div>

											<div class="fluid column ed-fields">

												<!-- SELECTED DOODLE -->
												<div class="ed-selected-doodle">
													<select class="ed-selected-doodle-select" id="ed_example_selected_doodle">>
													</select>
												</div>

												<!-- FIELD ROW -->
												<div class="field-row">
													<label for="ed-field-1">
														Field 1:
													</label>
													<div class="row">
														<div class="large-8 column">
															<select name="field" id="ed-field-1">
																<option data-value="Large">Large</option>
																<option data-value="Medium">Medium</option>
																<option data-value="Small">Small</option>
															</select>
														</div>
													</div>
												</div>
												<!-- FIELD ROW -->
												<div class="field-row">
													<label for="ed-field-2">
														Field 2:
													</label>
													<div class="row">
														<div class="large-8 column">
															<select name="field" id="ed-field-2">
																<option>Large</option>
																<option>Medium</option>
																<option>Small</option>
															</select>
														</div>
													</div>
												</div>
												<!-- FIELD ROW -->
												<div class="field-row">
													<label for="ed-field-3">
														Field 3:
													</label>
													<textarea rows="2" id="ed-field-3"></textarea>
												</div>
												<!-- FIELD ROW -->
												<fieldset class="field-row">
													<label>
														<input type="checkbox" id="field-option-1" /> Option 1
													</label>
													<label>
														<input type="checkbox" id="field-option-2" /> Option 2
													</label>
												</fieldset>
												<!-- FIELD ROW -->
												<div class="field-row">
													<button class="small">Report</button>
													<button class="small">Clear</button>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="element-eye left-eye column side right" data-side="left">
								<div class="data-row">
									<div class="data-value">
										<p><strong>TODO:</strong></p>
										<ul>
											<li>Check <code>doodle.isForDrawing</code> and <code>doodle.addSquiggle()</code> is still required. (richw)</li>
											<li>Reset eyedraw could do with some improvements (richw/bill)</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</section>
					<!-- END Anterior segment EDIT -->

					<!-- Refraction EDIT -->
					<section class="element">
						<header class="element-header">
							<h3 class="element-title">Refraction</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left" data-side="right">

								<div class="eyedraw-row refraction">

									<!-- EYEDRAW WIDGET START -->
									<div class="ed-widget anterior-segment" id="eyedrawwidget_example">

										<div class="ed-body">

											<div class="fixed column">

												<div class="ed-editor">

													<!-- CANVAS -->
													<div class="ed-canvas-container"></div>
													<canvas
													id="ed_example_refraction"
													class="ed-canvas-edit"
													width="160"
													height="160"
													tabindex="1">
													</canvas>

													<!-- CANVAS TOOLBAR -->
													<ul class="ed-toolbar-panel ed-canvas-toolbar">
														<li>
															<a class="ed-button" href="#" data-function="resetEyedraw">
																<span class="icon-ed-reset"></span>
																<span class="label">Reset eyedraw</span>
															</a>
														</li>
													</ul>

													<!-- DATA FIELD -->
													<input
														type="hidden"
														id="ed_example_refraction_data"
														value='' />
												</div>
											</div>

											<div class="fluid column ed-fields">

												<!-- FIELD ROW -->
												<div class="field-row">
													<label for="ed-field-1">
														Field 1:
													</label>
													<div class="row">
														<div class="large-8 column">
															<select name="field" id="ed-field-1">
																<option data-value="Large">Large</option>
																<option data-value="Medium">Medium</option>
																<option data-value="Small">Small</option>
															</select>
														</div>
													</div>
												</div>
												<!-- FIELD ROW -->
												<div class="field-row">
													<label for="ed-field-2">
														Field 2:
													</label>
													<div class="row">
														<div class="large-8 column">
															<select name="field" id="ed-field-2">
																<option>Large</option>
																<option>Medium</option>
																<option>Small</option>
															</select>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="element-eye left-eye column side right" data-side="left">
							</div>
						</div>
					</section>
					<!-- END Refraction EDIT -->

					<!-- Anterior segment VIEW -->
					<section class="element Element_OphCiExamination_AnteriorSegment">
						<header class="element-header">
							<h3 class="element-title">Anterior Segment (view mode)</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left" data-side="right">
								<div class="eyedraw-row">

									<!-- EYEDRAW WIDGET START -->
									<div class="ed-widget anterior-segment" id="eyedrawwidget_example">

										<div class="ed-body">

											<div class="fixed column ed-editor">

												<!-- CANVAS -->
												<canvas
												id="ed_example_display"
												class="ed-canvas-display"
												width="200"
												height="200"
												tabindex="1">
												</canvas>

												<span class="ed-canvas-tooltip" id="ed_exampleTooltip2"></span>

												<!-- DATA FIELD -->
												<input
													type="hidden"
													id="ed_example_display_input_data"
													name=""
													value='[{"version":1.1,"subclass":"NuclearCataract","originX":0,"originY":0,"apexY":-120,"order":0},{"version":1.1,"subclass":"AntSeg","apexY":-260,"pxe":false,"coloboma":false,"colour":"Blue","ectropion":false,"order":1},{"version":1.1,"subclass":"ACIOL","originX":-177,"originY":37,"rotation":0,"order":2}]'
												/>
											</div>

											<div class="fluid column ed-data">
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="element-eye left-eye column side right" data-side="left">
								<div class="data-row">
									<div class="data-value">
										<p><strong>UX Notes/issues:</strong></p>
									</div>
								</div>
							</div>
						</div>
					</section>
					<!-- END Anterior segment VIEW -->

					<!-- CATARACT EDIT -->
					<section class="element">
						<header class="element-header">
							<h3 class="element-title">Cataract synced with surgeon</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left" data-side="right">

								<div class="eyedraw-row">

									<!-- CATARACT EYEDRAW WIDGET START -->
									<div class="ed-widget anterior-segment" id="eyedrawwidget_example">

										<div class="ed-body">

											<div class="fixed column ed-editor">

												<!-- CANVAS -->
												<canvas
												id="ed_example_cataract"
												class="ed-canvas-edit"
												width="300"
												height="300"
												tabindex="1">
												</canvas>

												<!-- TOOLTIP -->
												<span class="ed-canvas-tooltip" id="ed_exampleTooltip"></span>

												<!-- DATA FIELD -->
												<input
													type="hidden"
													id="ed_example_cataract_input_data"
													value='' />
											</div>

											<div class="fluid column ed-fields">

											</div>
										</div>
									</div>
								</div>
								<!-- END CATARACT EYEDRAW WIDGET -->

								<!-- SURGEON EYEDRAW WIDGET START -->
								<div class="eyedraw-row">
									<div class="ed-widget anterior-segment" id="eyedrawwidget_example">

										<div class="ed-body">
											<div class="ed-editor">

												<!-- CANVAS -->
												<canvas
												id="ed_example_surgeon"
												class="ed-canvas-edit"
												width="300"
												height="300"
												tabindex="1">
												</canvas>

												<!-- TOOLTIP -->
												<span class="ed-canvas-tooltip" id="ed_exampleTooltip"></span>

												<!-- DATA FIELD -->
												<input
													type="hidden"
													id="ed_example_surgeon_input_data"
													value='' />
											</div>
										</div>
									</div>
								</div>
								<!-- END SURGEON EYEDRAW WIDGET -->

							</div>
							<div class="element-eye left-eye column side right" data-side="left">
								<p>This example show how an EyeDraw widget can be synced with another EyeDraw widget.</p>
								<p>In the second EyeDraw widget, the 'Surgeon' doodle is synced with the first widget with the PhakoIncision doodle.</p>
							</div>
						</div>
					</section>
					<!-- END CATARACT EDIT -->

				</div>
			</div>
		</div>
	</div>

	<script>
	(function() {
		// Custom listener
		function TestListener(drawing) {
			this.drawing = drawing;
			this.init();
		}
		TestListener.prototype.init = function() {
			this.drawing.registerForNotifications(this, 'callback', [
				'doodleAdded',
				'doodleDeleted',
				'parameterChanged'
			]);
		};
		TestListener.prototype.callback = function(_messageArray) {};
		window.TestListener = TestListener;
	}());
	</script>

	<script>
	(function() {
		ED.setTitles({
			"NONE": "No description available for this doodle",
			"ACIOL": "Anterior chamber IOL",
			"AdnexalEye": "Adnexal eye template",
			"Ahmed": "Ahmed tube",
			"AngleGrade": "Angle grade",
			"AngleNV": "Angle new vessels",
			"AngleRecession": "Angle recession",
			"AntPVR": "Anterior PVR",
			"AntSeg": "Anterior segment",
			"AntSynech": "Anterior synechiae",
			"APattern": "A pattern",
			"ArcuateScotoma": "Arcuate scotoma",
			"Arrow": "Arrow",
			"Baerveldt": "Baerveld tube",
			"BiopsySite": "Biopsy site",
			"Bleb": "Trabeculectomy bleb",
			"BlotHaemorrhage": "Blot haemorrhage",
			"Buckle": "Buckle",
			"BuckleOperation": "Buckle operation",
			"BuckleSuture": "Buckle suture",
			"BusaccaNodule": "Busacca nodule",
			"CapsularTensionRing": "Capsular Tension Ring",
			"ChandelierDouble": "Double chandelier",
			"ChandelierSingle": "Chandelier",
			"ChoroidalHaemorrhage": "Choroidal haemorrhage",
			"ChoroidalNaevus": "Choroidal naevus",
			"CiliaryInjection": "Cilary injection",
			"Circinate": "Circinate retinopathy",
			"CircumferentialBuckle": "Circumferential buckle",
			"CNV": "Choroidal new vessels",
			"ConjunctivalFlap": "Conjunctival flap",
			"CornealAbrasion": "Corneal abrasion",
			"CornealErosion": "Removal of corneal epithelium",
			"CornealGraft": "Corneal graft",
			"CornealOedema": "Corneal oedema",
			"CornealScar": "Corneal scar",
			"CornealStriae": "Corneal striae",
			"CornealSuture": "Corneal suture",
			"CorticalCataract": "Cortical cataract",
			"CottonWoolSpot": "Cotton wool spot",
			"Cryo": "Cryotherapy scar",
			"CutterPI": "Cutter iridectomy",
			"CystoidMacularOedema": "Cystoid macular oedema",
			"DiabeticNV": "Diabetic new vessels",
			"Dialysis": "Dialysis",
			"DiscHaemorrhage": "Disc haemorrhage",
			"DiscPallor": "Disc pallor",
			"DrainageRetinotomy": "Drainage retinotomy",
			"DrainageSite": "Drainage site",
			"EncirclingBand": "Encircling band",
			"EntrySiteBreak": "Entry site break",
			"EpiretinalMembrane": "Epiretinal membrane",
			"FibrousProliferation": "Fibrous proliferation",
			"FocalLaser": "Focal laser",
			"Freehand": "Freehand drawing",
			"Fuchs": "Fuchs endothelial dystrophy",
			"Fundus": "Fundus",
			"Geographic": "Geographic atrophy",
			"Gonioscopy": "Gonioscopy",
			"GRT": "Giant retinal tear",
			"HardDrusen": "Hard drusen",
			"HardExudate": "Hard exudate",
			"Hyphaema": "Hyphaema",
			"Hypopyon": "Hypopyon",
			"IatrogenicBreak": "IatrogenicBreak",
			"ILMPeel": "ILM peel",
			"InjectionSite": "Injection site",
			"InnerLeafBreak": "Inner leaf break",
			"Iris": "Iris",
			"IrisHook": "Iris hook",
			"IrisNaevus": "Iris naevus",
			"IRMA": "Intraretinal microvascular abnormalities",
			"KeraticPrecipitates": "Keratic precipitates",
			"KoeppeNodule": "Koeppe nodule",
			"KrukenbergSpindle": "Krukenberg spindle",
			"Label": "Label",
			"LaserCircle": "Circle of laser photocoagulation",
			"LaserDemarcation": "Laser demarcation",
			"LasikFlap": "LASIK flap",
			"LaserSpot": "Laser spot",
			"Lattice": "Lattice",
			"Lens": "Lens",
			"LimbalRelaxingIncision": "Limbal relaxing incision",
			"Macroaneurysm": "Macroaneurysm",
			"MacularDystrophy": "Macular dystrophy",
			"MacularGrid": "Macular grid laser",
			"MacularHole": "Macular hole",
			"MacularThickening": "Macular thickening",
			"MattressSuture": "Mattress suture",
			"Microaneurysm": "Microaneurysm",
			"Molteno": "Molteno tube",
			"NerveFibreDefect": "Nerve fibre defect",
			"NuclearCataract": "Nuclear cataract",
			"OpticCup": "Optic cup",
			"OpticDisc": "Optic disc",
			"OpticDiscPit": "Optic disc pit",
			"OrthopticEye": "Orthoptic eye",
			"OuterLeafBreak": "Outer leaf break",
			"Papilloedema": "Papilloedema",
			"Patch": "Tube patch",
			"PCIOL": "Posterior chamber IOL",
			"PeripapillaryAtrophy": "Peripapillary atrophy",
			"PeripheralRetinectomy": "Peripheral retinectomy",
			"PhakoIncision": "Phako incision",
			"PI": "Peripheral iridectomy",
			"PointInLine": "Point in line",
			"PosteriorCapsule": "Posterior capsule",
			"PosteriorEmbryotoxon": "Posterior embryotoxon",
			"PostPole": "Posterior pole",
			"PostSubcapCataract": "Posterior subcapsular cataract",
			"PosteriorRetinectomy": "Posterior retinectomy",
			"PosteriorSynechia": "Posterior synechia",
			"PreRetinalHaemorrhage": "Pre-retinal haemorrhage",
			"PRP": "Panretinal photocoagulation",
			"PRPPostPole": "Panretinal photocoagulation (posterior pole)",
			"Pupil": "Pupil",
			"RadialSponge": "Radial sponge",
			"RetinalArteryOcclusionPostPole": "Retinal artery occlusion",
			"RetinalTouch": "Retinal touch",
			"RetinalVeinOcclusionPostPole": "Retinal vein occluson",
			"Retinoschisis": "Retinoschisis",
			"RK": "Radial keratotomy",
			"RoundHole": "Round hole",
			"RPEDetachment": "RPE detachment",
			"RPERip": "RPE rip",
			"RRD": "Rhegmatogenous retinal detachment",
			"Rubeosis": "Rubeosis iridis",
			"SectorPRP": "Sector PRP",
			"SectorPRPPostPole": "Sector PRP (posterior pole)",
			"ScleralIncision": "Scleral Incision",
			"Sclerostomy": "Sclerostomy",
			"SectorIridectomy": "Sector iridectomy",
			"Shading": "Shading",
			"SidePort": "Side port",
			"Slider": "Slider",
			"StarFold": "Star fold",
			"SubretinalFluid": "Subretinal fluid",
			"SubretinalPFCL": "Subretinal PFCL",
			"Supramid": "Supramid suture",
			"SwollenDisc": "Swollen disc",
			"Telangiectasis": "Parafoveal telangiectasia",
			"Trabectome": "Trabectome",
			"TrabyFlap": "Trabeculectomy flap",
			"TrabySuture": "Trabeculectomy suture",
			"ToricPCIOL": "Toric posterior chamber IOL",
			"TractionRetinalDetachment": "Traction retinal detachment",
			"TransilluminationDefect": "Transillumination defect",
			"UpDrift": "Up drift",
			"UpShoot": "Up shoot",
			"UTear": "Traction ‘U’ tear",
			"Vicryl": "Vicryl suture",
			"ViewObscured": "View obscured",
			"VitreousOpacity": "Vitreous opacity",
			"VPattern": "V pattern",
			"Crepitations": "Crepitations",
			"Stenosis": "Stenosis",
			"Wheeze": "Wheeze",
			"Effusion": "Pleural effusion",
			"LeftCoronaryArtery": "Left coronary artery",
			"DrugStent": "Drug eluting stent",
			"MetalStent": "Metal stent",
			"Bypass": "Coronary artery bypass",
			"Bruit": "Bruit",
			"Bruising": "Bruising",
			"Haematoma": "Haematoma"
		});
	}());
	</script>

	<script>
	(function() {
		// Anterior segment edit
		ED.init({
			canvasId: "ed_example",
			eye: 0,
			scale: 1,
			idSuffix: "AntSeg",
			isEditable: true,
			focus: false,
			graphicsPath: "../../../assets/img/",
			inputId: "ed_example_data",
			onReadyCommandArray: [
				[
					"addDoodle",
					[
						"AntSeg"
					]
				],
				[
					"deselectDoodles",
					[]
				]
			],
			onDoodlesLoadedCommandArray: [],
			bindingArray: {
				AntSeg: {
					pupilSize: {
						id: "ed-field-1",
						attribute: "data-value"
					},
					pxe: {
						id: "field-option-1"
					}
				}
			},
			syncArray: {},
			listenerArray: [
				TestListener
			],
			offsetX: 0,
			offsetY: 0,
			toImage: false
		});
	}());
	</script>

	<script>
	(function() {
		// Refraction edit
		ED.init({
			canvasId: "ed_example_refraction",
			eye: 0,
			scale: 1,
			idSuffix: "_refraction",
			isEditable: true,
			focus: false,
			graphicsPath: "../../../assets/img/",
			inputId: "ed_example_refraction_data",
			onReadyCommandArray: [
				['addDoodle', ['TrialFrame']],
				['addDoodle', ['TrialLens']],
				['deselectDoodles', []]
			],
			onDoodlesLoadedCommandArray: [],
			bindingArray: {},
			syncArray: {},
			listenerArray: [
				TestListener
			],
			offsetX: 0,
			offsetY: 0,
			toImage: false
		});
	}());
	</script>

	<script>
	(function() {
		// Anterior segment view
		ED.init({
			canvasId: 'ed_example_display',
			inputId: 'ed_example_display_input_data',
			eye: 0,
			scale: 1,
			idSuffix: 'AntSegView',
			isEditable: false,
			focus: false,
			graphicsPath: "../../../assets/img/",
			onReadyCommandArray: [],
			onDoodlesLoadedCommandArray: [],
			bindingArray: {},
			deleteValueArray: {},
			syncArray: {},
			listenerArray: [],
			offsetX: 0,
			offsetY: 0,
			toImage: false
		});
	}());
	</script>

	<script>
	(function() {
		// Cataract edit
		ED.init({
			canvasId: 'ed_example_cataract',
			inputId: 'ed_example_cataract_input_data',
			eye: 0,
			scale: 1,
			idSuffix: 'Cataract',
			isEditable: true,
			focus: false,
			graphicsPath: "../../../assets/img/",
			onReadyCommandArray: [
				// ['addDoodle', ['AntSeg']],
				['addDoodle', ['PhakoIncision']],
				// ['addDoodle', ['PCIOL']],
				['deselectDoodles', []]
			],
			onDoodlesLoadedCommandArray: [],
			bindingArray: {},
			deleteValueArray: {},
			syncArray: {},
			listenerArray: [],
			offsetX: 10,
			offsetY: 10,
			toImage: false
		});

		// Surgeon synced with cataract
		ED.init({
			canvasId: 'ed_example_surgeon',
			inputId: 'ed_example_surgeon_input_data',
			eye: 0,
			scale: 1,
			idSuffix: 'Position',
			isEditable: true,
			focus: false,
			graphicsPath: "../../../assets/img/",
			onReadyCommandArray: [
				['addDoodle', ['OperatingTable']],
				['addDoodle', ['Surgeon']],
				['deselectDoodles', []]
			],
			onDoodlesLoadedCommandArray: [],
			bindingArray: [],
			deleteValueArray: {},
			syncArray: {
				Cataract: {
					Surgeon: {
						PhakoIncision: {
							parameters: ['rotation']
						}
					}
				}
			},
			listenerArray: [],
			offsetX: 10,
			offsetY: 10,
			toImage: false
		});
	}());
	</script>
	<!-- END EYEDRAW INIT -->
	<script>
	(function() {
		$(function() {
			// We're dynamically adding in this styelsheet to test if the eyedraw is
			// initiated only after the dependent stylesheets are loaded.
			$('<link rel="stylesheet" type="text/css" href="../../../assets/css/oe-eyedraw.css?cache=' + (new Date).getTime() + '" />').appendTo(document.body);
		});
	}());
	</script>
</body>
</html>