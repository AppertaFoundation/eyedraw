<!doctype html>
<html>
<head>
	<title>Eyedraw doodle popup menu prototype</title>

	<!-- This is the main OpenEyes stlesheet -->
	<link rel="stylesheet" type="text/css" href="css/style.css" />

	<!-- This is purely used for test/demo purposes -->
	<link rel="stylesheet" type="text/css" href="css/test.css" />

	<!-- The eyedraw widget stylesheet -->
	<link rel="stylesheet" type="text/css" href="../../assets/css/oe-eyedraw.css" />

	<!-- Other dependent scripts -->
	<script type="text/javascript" src="../../assets/components/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="../../assets/components/mustache/mustache.js"></script>
	<script type="text/javascript" src="../../assets/components/eventemitter2/lib/eventemitter2.js"></script>

	<!-- Load in the eyedraw scripts -->
	<script>
	(function() {
		// We have to use 'jsonp' here so that we can run this test document on the
		// file:// protocol (ie, without the use of a webserver)
		this.scriptsLoadCallback = function(obj) {
			obj.files.forEach(function(file) {
				// We use document.write to force the files to be loaded synchronously.
				document.write('<script src="../../src/' + file + '"><\/script>');
			});
		};
	}.call(this));
	</script>
	<script type="text/javascript" src="./js/scripts.jsonp"></script>
	<!-- End loading in eyedraw scripts -->
</head>
<body>
	<div class="container main" role="main">
		<div class="container content">
			<div class="large-12 column event edit">
				<header class="event-header">
					<ul class="inline-list tabs event-actions">
						<li class="selected">
							<a href="#">Create</a>
						</li>
					</ul>
				</header>
				<div class="event-content" id="event-content">
					<h2 class="event-title">Event title</h2>

					<!-- Introduction -->
					<section class="element hide">
						<header class="element-header">
							<h3 class="element-title">Introduction</h3>
						</header>
						<div class="element-fields">
							<p>This document demonstrates different uses of the EyeDraw widget, and was created as part of <a href="https://openeyes.atlassian.net/browse/OED-4">OED-4</a>.</p>
						</div>
					</section>
					<!-- END Introduction -->

					<!-- Anterior segment EDIT -->
					<section class="element Element_OphCiExamination_AnteriorSegment">
						<header class="element-header">
							<h3 class="element-title">Anterior Segment (edit mode)</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left" data-side="right">

								<!-- EYEDRAW WIDGET START -->
								<div class="eyedraw-widget anterior-segment" id="eyedrawwidget_example">

									<!-- TOOLBAR START -->
									<div class="eyedraw-toolbar">

										<!-- PANEL START -->
										<ul class="eyedraw-toolbar-panel">
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="NuclearCataract">
													<span class="icon-ed-NuclearCataract"></span>
													<span class="label">Nuclear cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="CorticalCataract">
													<span class="icon-ed-CorticalCataract"></span>
													<span class="label">Cortical cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PostSubcapCataract">
													<span class="icon-ed-PostSubcapCataract"></span>
													<span class="label">Posterior subcapsular cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PCIOL">
													<span class="icon-ed-PCIOL"></span>
													<span class="label">Posterior chamber IOL</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="ACIOL">
													<span class="icon-ed-ACIOL"></span>
													<span class="label">Anterior chamber IOL</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="Bleb">
													<span class="icon-ed-Bleb"></span>
													<span class="label">Trabeculectomy bleb</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PI">
													<span class="icon-ed-PI"></span>
													<span class="label">Peripheral iridectomy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="Fuchs">
													<span class="icon-ed-Fuchs"></span>
													<span class="label">Fuchs endothelial dystrophy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="RK">
													<span class="icon-ed-RK"></span>
													<span class="label">Radial keratotomy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="LasikFlap">
													<span class="icon-ed-LasikFlap"></span>
													<span class="label">LASIK flap</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="CornealScar">
													<span class="icon-ed-CornealScar"></span>
													<span class="label">Corneal scar</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="SectorIridectomy">
													<span class="icon-ed-SectorIridectomy"></span>
													<span class="label">Sector iridectomy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PosteriorSynechia">
													<span class="icon-ed-PosteriorSynechia"></span>
													<span class="label">Posterior synechia</span>
												</a>
											</li>
										</ul>
										<!-- PANEL END -->

										<!-- PANEL START -->
										<!--
										<ul class="eyedraw-toolbar-panel">
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="NuclearCataract">
													<img src="../../assets/img/NuclearCataract.gif" />
													<span class="label">Nuclear cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="CorticalCataract">
													<img src="../../assets/img/CorticalCataract.gif" />
													<span class="label">Cortical cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PostSubcapCataract">
													<img src="../../assets/img/PostSubcapCataract.gif" />
													<span class="label">Posterior subcapsular cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PCIOL">
													<img src="../../assets/img/PCIOL.gif" />
													<span class="label">Posterior chamber IOL</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="ACIOL">
													<img src="../../assets/img/ACIOL.gif" />
													<span class="label">Anterior chamber IOL</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="Bleb">
													<img src="../../assets/img/Bleb.gif" />
													<span class="label">Trabeculectomy bleb</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PI">
													<img src="../../assets/img/PI.gif" />
													<span class="label">Peripheral iridectomy</span>
												</a>
											</li>
											<li class="drawer">
												<a class="eyedraw-button" href="#">
													<img src="../../assets/img/more.gif" />
													<span class="label">More...</span>
												</a>
												<ul>
													<li>
														<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="Fuchs">
															<img src="../../assets/img/Fuchs.gif" />
															<span class="label">Fuchs endothelial dystrophy</span>
														</a>
													</li>
													<li>
														<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="RK">
															<img src="../../assets/img/RK.gif" />
															<span class="label">Radial keratotomy</span>
														</a>
													</li>
													<li>
														<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="LasikFlap">
															<img src="../../assets/img/LasikFlap.gif" />
															<span class="label">LASIK flap</span>
														</a>
													</li>
													<li>
														<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="CornealScar">
															<img src="../../assets/img/CornealScar.gif" />
															<span class="label">Corneal scar</span>
														</a>
													</li>
													<li>
														<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="SectorIridectomy">
															<img src="../../assets/img/SectorIridectomy.gif" />
															<span class="label">Sector iridectomy</span>
														</a>
													</li>
													<li>
														<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="PosteriorSynechia">
															<img src="../../assets/img/PosteriorSynechia.gif" />
															<span class="label">Posterior synechia</span>
														</a>
													</li>
													<li>
														<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="Rubeosis">
															<img src="../../assets/img/Rubeosis.gif" />
															<span class="label">Rubeosis iridis</span>
														</a>
													</li>
												</ul>
											</li>
										</ul>
										-->
										<!-- PANEL END-->
									</div>
									<!-- TOOLBAR END -->

									<div class="eyedraw-body">
										<div class="row">

											<div class="fixed column eyedraw-editor">

												<!-- CANVAS -->
												<canvas
												id="ed_example"
												class="eyedraw-canvas-edit"
												width="300"
												height="300"
												tabindex="1">
												</canvas>

												<!-- TOOLTIP -->
												<span class="eyedraw-canvas-tooltip" id="ed_exampleTooltip"></span>

												<!-- SELECTED DOODLE -->
												<div class="eyedraw-selected-doodle">
													<div class="selected-box">
														<select class="eyedraw-selected-doodle-select" id="ed_example_selected_doodle">>
														</select>
													</div>
												</div>

												<!-- DOODLE POPUP -->
												<div class="eyedraw-doodle-popup closed">
												</div>

												<!-- DATA FIELD -->
												<input
													type="hidden"
													id="ed_example_data"
													value='' />
											</div>

											<div class="fluid column eyedraw-fields">

												<!-- FIELD ROW -->
												<div class="field-row">
													<label for="eyedraw-field-1">
														Field 1:
													</label>
													<div class="row">
														<div class="large-8 column">
															<select name="field" id="eyedraw-field-1">
																<option data-value="Large">Large</option>
																<option data-value="Medium">Medium</option>
																<option data-value="Small">Small</option>
															</select>
														</div>
													</div>
												</div>
												<!-- FIELD ROW -->
												<div class="field-row">
													<label for="eyedraw-field-2">
														Field 2:
													</label>
													<div class="row">
														<div class="large-8 column">
															<select name="field" id="eyedraw-field-2">
																<option>Large</option>
																<option>Medium</option>
																<option>Small</option>
															</select>
														</div>
													</div>
												</div>
												<!-- FIELD ROW -->
												<div class="field-row">
													<label for="eyedraw-field-3">
														Field 3:
													</label>
													<textarea rows="2" id="eyedraw-field-3"></textarea>
												</div>
												<!-- FIELD ROW -->
												<fieldset class="field-row">
													<label>
														<input type="checkbox" id="field-option-1" /> Option 1
													</label>
													<label>
														<input type="checkbox" id="field-option-2" /> Option 2
													</label>
												</fieldset>
												<!-- FIELD ROW -->
												<div class="field-row">
													<button class="small">Report</button>
													<button class="small">Clear</button>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="element-eye left-eye column side right" data-side="left">
								<div class="data-row">
									<div class="data-value">
										<p><strong>UX Notes/issues:</strong></p>
										<ul>
											<li>Doodle's cannot be selected after they are locked.</li>
											<li>Need button disabled state designed</li>
											<li>Do we still need toolbar drop menus?</li>
											<li>Do we still need the canvas tooltips?</li>
										</ul>
										<p><strong>Dev issues:</strong></p>
										<ul>
											<li>Doodle controls have not been implemented</li>
										</ul>
									</div>
								</div>
							</div>
						</div>
					</section>
					<!-- END Anterior segment EDIT -->

					<!-- Anterior segment VIEW -->
					<section class="element hide Element_OphCiExamination_AnteriorSegment">
						<header class="element-header">
							<h3 class="element-title">Anterior Segment (view mode)</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left" data-side="right">

								<!-- EYEDRAW WIDGET START -->
								<div class="eyedraw-widget anterior-segment" id="eyedrawwidget_example">



									<div class="eyedraw-body">
										<div class="row">

											<div class="fixed column eyedraw-editor">

												<!-- CANVAS -->
												<canvas
												id="ed_example_display"
												class="eyedraw-canvas-display"
												width="200"
												height="200"
												tabindex="1">
												</canvas>

												<span class="eyedraw-canvas-tooltip" id="ed_exampleTooltip2"></span>

												<!-- DATA FIELD -->
												<input
													type="hidden"
													id="ed_example_display_input_data"
													name=""
													value='[{"version":1.1,"subclass":"NuclearCataract","originX":0,"originY":0,"apexY":-120,"order":0},{"version":1.1,"subclass":"AntSeg","apexY":-260,"pxe":false,"coloboma":false,"colour":"Blue","ectropion":false,"order":1},{"version":1.1,"subclass":"ACIOL","originX":-177,"originY":37,"rotation":0,"order":2}]'
												/>
											</div>

											<div class="fluid column eyedraw-data">
											</div>
										</div>
									</div>
								</div>
							</div>
							<div class="element-eye left-eye column side right" data-side="left">
								<div class="data-row">
									<div class="data-value">
										<p><strong>UX Notes/issues:</strong></p>
									</div>
								</div>
							</div>
						</div>
					</section>
					<!-- END Anterior segment VIEW -->










					<!-- CATARACT EDIT -->
					<section class="element hide">
						<header class="element-header">
							<h3 class="element-title">Cataract synced with surgeon</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left" data-side="right">

								<!-- CATARACT EYEDRAW WIDGET START -->
								<div class="eyedraw-widget anterior-segment" id="eyedrawwidget_example">

									<!-- TOOLBAR START -->
									<div class="eyedraw-toolbar">

										<!-- PANEL START -->
										<ul class="eyedraw-toolbar-panel">
											<li>
												<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PhakoIncision">
													<span class="icon-ed-PhakoIncision"></span>
													<span class="label">Phako incision</span>
												</a>
											</li>
										</ul>
									</div>
									<!-- TOOLBAR END -->

									<div class="eyedraw-body">
										<div class="row">

											<div class="fixed column eyedraw-editor">

												<!-- CANVAS -->
												<canvas
												id="ed_example_cataract"
												class="eyedraw-canvas-edit"
												width="300"
												height="300"
												tabindex="1">
												</canvas>

												<!-- TOOLTIP -->
												<span class="eyedraw-canvas-tooltip" id="ed_exampleTooltip"></span>

												<!-- DATA FIELD -->
												<input
													type="hidden"
													id="ed_example_cataract_input_data"
													value='' />
											</div>

											<div class="fluid column eyedraw-fields">

											</div>
										</div>
									</div>
								</div>
								<!-- END CATARACT EYEDRAW WIDGET -->

								<!-- SURGEON EYEDRAW WIDGET START -->
								<div class="eyedraw-widget anterior-segment" id="eyedrawwidget_example">

									<div class="eyedraw-body">
										<div class="eyedraw-editor">

											<!-- CANVAS -->
											<canvas
											id="ed_example_surgeon"
											class="eyedraw-canvas-edit"
											width="300"
											height="300"
											tabindex="1">
											</canvas>

											<!-- TOOLTIP -->
											<span class="eyedraw-canvas-tooltip" id="ed_exampleTooltip"></span>

											<!-- DATA FIELD -->
											<input
												type="hidden"
												id="ed_example_surgeon_input_data"
												value='' />
										</div>
									</div>
								</div>
								<!-- START SURGEON EYEDRAW WIDGET -->

							</div>
							<div class="element-eye left-eye column side right" data-side="left">
								<p>This example show how an EyeDraw widget can be synced with another EyeDraw widget.</p>
								<p>In the second EyeDraw widget, the 'Surgeon' doodle is synced with the first widget with the PhakoIncision doodle.</p>
							</div>
						</div>
					</section>
					<!-- END CATARACT EDIT -->





					<!-- Toolbar example -->
					<section class="element hide">
						<header class="element-header">
							<h3 class="element-title">Toolbar &amp; icons</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left">
								<!-- EYEDRAW WIDGET START -->
								<div class="eyedraw-widget anterior-segment" id="eyedrawwidget_example">

									<!-- TOOLBAR START -->
									<div class="eyedraw-toolbar">

										<!-- Manipulation icons -->
										<ul class="eyedraw-toolbar-panel">
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-delete"></span>
													<span class="label">Delete</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-drawer-open"></span>
													<span class="label">Open Drawer</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-lock"></span>
													<span class="label">Lock</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-unlock"></span>
													<span class="label">Unlock</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-move-to-back"></span>
													<span class="label">Move to back</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-move-to-front"></span>
													<span class="label">Move to front</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-reset"></span>
													<span class="label">Reset</span>
												</a>
											</li>
										</ul>

										<!-- Gonioscopy icons -->
										<ul class="eyedraw-toolbar-panel">
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-AngleNV"></span>
													<span class="label">Angle new vessels</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#">
													<span class="icon-ed-AntSynech"></span>
													<span class="label">Anterior synechiae</span>
												</a>
											</li>
										</ul>

										<!-- Anterior Segment icons -->
										<ul class="eyedraw-toolbar-panel">
											<li>
												<a class="eyedraw-button" href="#" data-arg="NuclearCataract">
													<span class="icon-ed-NuclearCataract"></span>
													<span class="label">Nuclear cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="CorticalCataract">
													<span class="icon-ed-CorticalCataract"></span>
													<span class="label">Cortical cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="PostSubcapCataract">
													<span class="icon-ed-PostSubcapCataract"></span>
													<span class="label">Posterior subcapsular cataract</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="PCIOL">
													<span class="icon-ed-PCIOL"></span>
													<span class="label">Posterior chamber IOL</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="ACIOL">
													<span class="icon-ed-ACIOL"></span>
													<span class="label">Anterior chamber IOL</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="Bleb">
													<span class="icon-ed-Bleb"></span>
													<span class="label">Trabeculectomy bleb</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="PI">
													<span class="icon-ed-PI"></span>
													<span class="label">Peripheral iridectomy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="Fuchs">
													<span class="icon-ed-Fuchs"></span>
													<span class="label">Fuchs endothelial dystrophy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="RK">
													<span class="icon-ed-RK"></span>
													<span class="label">Radial keratotomy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="LasikFlap">
													<span class="icon-ed-LasikFlap"></span>
													<span class="label">LASIK flap</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="CornealScar">
													<span class="icon-ed-CornealScar"></span>
													<span class="label">Corneal scar</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="SectorIridectomy">
													<span class="icon-ed-SectorIridectomy"></span>
													<span class="label">Sector iridectomy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="PosteriorSynechia">
													<span class="icon-ed-PosteriorSynechia"></span>
													<span class="label">Posterior synechia</span>
												</a>
											</li>
										</ul>

										<!-- Optic Disc icons -->
										<ul class="eyedraw-toolbar-panel">
											<li>
												<a class="eyedraw-button" href="#" data-arg="PeripapillaryAtrophy">
													<span class="icon-ed-PeripapillaryAtrophy"></span>
													<span class="label">Peripapillary atrophy</span>
												</a>
											</li>

											<li>
												<a class="eyedraw-button" href="#" data-arg="DiscPallor">
													<span class="icon-ed-DiscPallor"></span>
													<span class="label">Disc pallor</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="DiscHaemorrhage">
													<span class="icon-ed-DiscHaemorrhage"></span>
													<span class="label">Disc haemorrhage</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="NerveFibreDefect">
													<span class="icon-ed-NerveFibreDefect"></span>
													<span class="label">Nerve fibre defect</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="OpticDiscPit">
													<span class="icon-ed-OpticDiscPit"></span>
													<span class="label">Optic disc pit</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="Papilloedema">
													<span class="icon-ed-Papilloedema"></span>
													<span class="label">Papilloedema</span>
												</a>
											</li>
										</ul>

										<!-- Posterior Pole -->
										<ul class="eyedraw-toolbar-panel">
											<li>
												<a class="eyedraw-button" href="#" data-arg="Geographic">
													<span class="icon-ed-Geographic"></span>
													<span class="label">Geographic atrophy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="VitreousOpacity">
													<span class="icon-ed-VitreousOpacity"></span>
													<span class="label">Vitreous opacity</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="DiabeticNV">
													<span class="icon-ed-DiabeticNV"></span>
													<span class="label">Diabetic new vessels</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="CNV">
													<span class="icon-ed-CNV"></span>
													<span class="label">Choroidal new vessels</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="Circinate">
													<span class="icon-ed-Circinate"></span>
													<span class="label">Circinate retinopathy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="CystoidMacularOedema">
													<span class="icon-ed-CystoidMacularOedema"></span>
													<span class="label">Cystoid macular oedema</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="EpiretinalMembrane">
													<span class="icon-ed-EpiretinalMembrane"></span>
													<span class="label">Epiretinal membrane</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="HardDrusen">
													<span class="icon-ed-HardDrusen"></span>
													<span class="label">Hard drusen</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="MacularHole">
													<span class="icon-ed-MacularHole"></span>
													<span class="label">Macular hole</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="RPEDetachment">
													<span class="icon-ed-RPEDetachment"></span>
													<span class="label">RPE detachment</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="MacularDystrophy">
													<span class="icon-ed-MacularDystrophy"></span>
													<span class="label">Macular dystrophy</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="Macroaneurysm">
													<span class="icon-ed-Macroaneurysm"></span>
													<span class="label">Macroaneurysm</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="RetinalVeinOcclusionPostPole">
													<span class="icon-ed-RetinalVeinOcclusionPostPole"></span>
													<span class="label">Retinal vein occluson</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="RetinalArteryOcclusionPostPole">
													<span class="icon-ed-RetinalArteryOcclusionPostPole"></span>
													<span class="label">Retinal artery occlusion</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="Microaneurysm">
													<span class="icon-ed-Microaneurysm"></span>
													<span class="label">Microaneurysm</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="BlotHaemorrhage">
													<span class="icon-ed-BlotHaemorrhage"></span>
													<span class="label">Blot haemorrhage</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="HardExudate">
													<span class="icon-ed-HardExudate"></span>
													<span class="label">Hard exudate</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="IRMA">
													<span class="icon-ed-IRMA"></span>
													<span class="label">Intraretinal microvascular abnormalities</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="MacularThickening">
													<span class="icon-ed-MacularThickening"></span>
													<span class="label">Macular thickening</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="PreRetinalHaemorrhage">
													<span class="icon-ed-PreRetinalHaemorrhage"></span>
													<span class="label">Pre-retinal haemorrhage</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="CottonWoolSpot">
													<span class="icon-ed-CottonWoolSpot"></span>
													<span class="label">Cotton wool spot</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="FibrousProliferation">
													<span class="icon-ed-FibrousProliferation"></span>
													<span class="label">Fibrous proliferation</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="TractionRetinalDetachment">
													<span class="icon-ed-TractionRetinalDetachment"></span>
													<span class="label">Traction retinal detachment</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="SwollenDisc">
													<span class="icon-ed-SwollenDisc"></span>
													<span class="label">Swollen disc</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="Telangiectasis">
													<span class="icon-ed-Telangiectasis"></span>
													<span class="label">Parafoveal telangiectasia</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="ChoroidalHaemorrhage">
													<span class="icon-ed-ChoroidalHaemorrhage"></span>
													<span class="label">Choroidal haemorrhage</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="ChoroidalNaevus">
													<span class="icon-ed-ChoroidalNaevus"></span>
													<span class="label">Choroidal naevus</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="LaserSpot">
													<span class="icon-ed-LaserSpot"></span>
													<span class="label">Laser spot</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="FocalLaser">
													<span class="icon-ed-FocalLaser"></span>
													<span class="label">Focal laser</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="MacularGrid">
													<span class="icon-ed-MacularGrid"></span>
													<span class="label">Macular grid laser</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="SectorPRPPostPole">
													<span class="icon-ed-SectorPRPPostPole"></span>
													<span class="label">Sector PRP (posterior pole)</span>
												</a>
											</li>
											<li>
												<a class="eyedraw-button" href="#" data-arg="PRPPostPole">
													<span class="icon-ed-PRPPostPole"></span>
													<span class="label">Panretinal photocoagulation (posterior pole)</span>
												</a>
											</li>
										</ul>

										<!-- DROP MENU -->
										<!--
										<ul class="eyedraw-toolbar-panel">
											<li class="drawer">
												<a class="eyedraw-button" href="#">
													<img src="../../assets/img/more.gif" />
													<span class="label">More...</span>
												</a>
												<ul>
													<li>
														<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="Fuchs">
															<img src="../../assets/img/Fuchs.gif" />
															<span class="label">Fuchs endothelial dystrophy</span>
														</a>
													</li>
												</ul>
											</li>
										</ul>
										-->
										<!-- PANEL END-->
									</div>
									<!-- TOOLBAR END -->

									<div class="eyedraw-body">
									</div>
								</div>
								<br/>
							</div>
							<div class="element-eye left-eye column side right">
								<p><strong>Notes:</strong></p>
								<ul>
									<li>
										This example shows:
										<ul>
											<li>The toolbar panels</li>
											<li>The toolbar buttons</li>
											<li>The icons</li>
											<li>The button interaction states</li>
											<li>The button tooltips</li>
										</ul>
									</li>
								</ul>
							</div>
						</div>
					</section>

					<!-- Developer notes -->
					<section class="element hide">
						<header class="element-header">
							<h3 class="element-title">Developer notes:</h3>
						</header>
						<div class="element-fields">
							<ul>
								<li>All required markup has to be present on the page.</li>
								<li>The EyeDraw classes are instantiated via a global 'eyeDrawInit' function, which then instantiates the following:
									<ul>
										<li>An eyedraw Drawing</li>
										<li>An eyedraw controller (the controller handles user and Drawing events)</li>
										<li>Other event based and collection classes (this can be improved and simplified)</li>
									</ul>
								</li>
								<li>Toolbar actions are routed to the eyedraw instance via inline JS, this can be improved.</li>
								<li>
									EyeDraw fields are bound to the drawing via the <code>bindingArray</code> option.
								</li>
								<li>There's an obvious coupling between the markup in the page (and thus PHP), the inline JavaScript and the external EyeDraw JavaScript.</li>
								<li>"HoverIntent" concept on the toolbars is now achieve via CSS animation timeouts</li>
							</ul>
						</div>
					</section>
					<!-- END Developer notes -->

				</div>
			</div>
		</div>
	</div>

	<!-- Doodle Popup template -->
	<script type="text/html" id="eyedraw-doodle-popup-template">
		{{#doodle}}
			<h4 class="eyedraw-doodle-popup-heading">
				<span class="eyedraw-button">
					<span class="icon icon-ed-{{doodle.className}}"></span>
				</span>
				<span class="title">{{title}}</span>
			</h4>
			{{#helpmsg}}
				<div class="help-msg">{{helpmsg}}</div>
			{{/helpmsg}}
			{{#desc}}
				<div class="description">{{{desc}}}</div>
			{{/desc}}
			<ul class="eyedraw-toolbar-panel">
				{{#doodle.isLocked}}
					<li>
						<a class="eyedraw-button" href="#" data-function="unlock">
							<span class="icon-ed-unlock"></span>
							<span class="label">Unlock</span>
						</a>
					</li>
				{{/doodle.isLocked}}
				{{^doodle.isLocked}}
					<li>
						<a class="eyedraw-button" href="#" data-function="lock">
							<span class="icon-ed-lock"></span>
							<span class="label">Lock</span>
						</a>
					</li>
				{{/doodle.isLocked}}
				<li>
					<a class="eyedraw-button" href="#" data-function="moveToBack">
						<span class="icon-ed-move-to-back"></span>
						<span class="label">Move to back</span>
					</a>
				</li>
				<li>
					<a class="eyedraw-button" href="#" data-function="moveToFront">
						<span class="icon-ed-move-to-front"></span>
						<span class="label">Move to front</span>
					</a>
				</li>
				{{#doodle.isDeletable}}
					<li>
						<a class="eyedraw-button" href="#" data-function="deleteSelectedDoodle">
							<span class="icon-ed-delete"></span>
							<span class="label">Delete</span>
						</a>
					</li>
				{{/doodle.isDeletable}}
			</ul>
		{{/doodle}}
	</script>

	<script>
	(function() {
		function TestListener(drawing) {
			this.drawing = drawing;
			console.log('ListeNer!');
			this.init();
		}

		TestListener.prototype.init = function() {
			// this.setDefaultDistance();
			this.drawing.registerForNotifications(this, 'callback', ['doodleAdded', 'doodleDeleted', 'parameterChanged']);
		};
		TestListener.prototype.setDefaultDistance = function() {
			// update
			// var validityArray = doodle.validateParameter('distance', distance.toString());
			// if (validityArray.valid) {
			// 	doodle.setParameterWithAnimation('distance', validityArray.value);
			// }
		};
		TestListener.prototype.callback = function(_messageArray) {
			// if (_messageArray.eventName == "doodleAdded" && _messageArray.object.className == 'InjectionSite') {
			// 	this._injectionDoodles[_messageArray.object.id] = _messageArray.object;
			// 	this.updateDoodleDistance(_messageArray.object, this._default_distance);
			// }
		};

		window.TestListener = TestListener;
	}());
	</script>

	<script>
	(function() {
		ED.setTitles({
			"NONE": "No description available for this doodle",
			"ACIOL": "Anterior chamber IOL",
			"AdnexalEye": "Adnexal eye template",
			"Ahmed": "Ahmed tube",
			"AngleGrade": "Angle grade",
			"AngleNV": "Angle new vessels",
			"AngleRecession": "Angle recession",
			"AntPVR": "Anterior PVR",
			"AntSeg": "Anterior segment",
			"AntSynech": "Anterior synechiae",
			"APattern": "A pattern",
			"ArcuateScotoma": "Arcuate scotoma",
			"Arrow": "Arrow",
			"Baerveldt": "Baerveld tube",
			"BiopsySite": "Biopsy site",
			"Bleb": "Trabeculectomy bleb",
			"BlotHaemorrhage": "Blot haemorrhage",
			"Buckle": "Buckle",
			"BuckleOperation": "Buckle operation",
			"BuckleSuture": "Buckle suture",
			"BusaccaNodule": "Busacca nodule",
			"CapsularTensionRing": "Capsular Tension Ring",
			"ChandelierDouble": "Double chandelier",
			"ChandelierSingle": "Chandelier",
			"ChoroidalHaemorrhage": "Choroidal haemorrhage",
			"ChoroidalNaevus": "Choroidal naevus",
			"CiliaryInjection": "Cilary injection",
			"Circinate": "Circinate retinopathy",
			"CircumferentialBuckle": "Circumferential buckle",
			"CNV": "Choroidal new vessels",
			"ConjunctivalFlap": "Conjunctival flap",
			"CornealAbrasion": "Corneal abrasion",
			"CornealErosion": "Removal of corneal epithelium",
			"CornealGraft": "Corneal graft",
			"CornealOedema": "Corneal oedema",
			"CornealScar": "Corneal scar",
			"CornealStriae": "Corneal striae",
			"CornealSuture": "Corneal suture",
			"CorticalCataract": "Cortical cataract",
			"CottonWoolSpot": "Cotton wool spot",
			"Cryo": "Cryotherapy scar",
			"CutterPI": "Cutter iridectomy",
			"CystoidMacularOedema": "Cystoid macular oedema",
			"DiabeticNV": "Diabetic new vessels",
			"Dialysis": "Dialysis",
			"DiscHaemorrhage": "Disc haemorrhage",
			"DiscPallor": "Disc pallor",
			"DrainageRetinotomy": "Drainage retinotomy",
			"DrainageSite": "Drainage site",
			"EncirclingBand": "Encircling band",
			"EntrySiteBreak": "Entry site break",
			"EpiretinalMembrane": "Epiretinal membrane",
			"FibrousProliferation": "Fibrous proliferation",
			"FocalLaser": "Focal laser",
			"Freehand": "Freehand drawing",
			"Fuchs": "Fuchs endothelial dystrophy",
			"Fundus": "Fundus",
			"Geographic": "Geographic atrophy",
			"Gonioscopy": "Gonioscopy",
			"GRT": "Giant retinal tear",
			"HardDrusen": "Hard drusen",
			"HardExudate": "Hard exudate",
			"Hyphaema": "Hyphaema",
			"Hypopyon": "Hypopyon",
			"IatrogenicBreak": "IatrogenicBreak",
			"ILMPeel": "ILM peel",
			"InjectionSite": "Injection site",
			"InnerLeafBreak": "Inner leaf break",
			"Iris": "Iris",
			"IrisHook": "Iris hook",
			"IrisNaevus": "Iris naevus",
			"IRMA": "Intraretinal microvascular abnormalities",
			"KeraticPrecipitates": "Keratic precipitates",
			"KoeppeNodule": "Koeppe nodule",
			"KrukenbergSpindle": "Krukenberg spindle",
			"Label": "Label",
			"LaserCircle": "Circle of laser photocoagulation",
			"LaserDemarcation": "Laser demarcation",
			"LasikFlap": "LASIK flap",
			"LaserSpot": "Laser spot",
			"Lattice": "Lattice",
			"Lens": "Lens",
			"LimbalRelaxingIncision": "Limbal relaxing incision",
			"Macroaneurysm": "Macroaneurysm",
			"MacularDystrophy": "Macular dystrophy",
			"MacularGrid": "Macular grid laser",
			"MacularHole": "Macular hole",
			"MacularThickening": "Macular thickening",
			"MattressSuture": "Mattress suture",
			"Microaneurysm": "Microaneurysm",
			"Molteno": "Molteno tube",
			"NerveFibreDefect": "Nerve fibre defect",
			"NuclearCataract": "Nuclear cataract",
			"OpticCup": "Optic cup",
			"OpticDisc": "Optic disc",
			"OpticDiscPit": "Optic disc pit",
			"OrthopticEye": "Orthoptic eye",
			"OuterLeafBreak": "Outer leaf break",
			"Papilloedema": "Papilloedema",
			"Patch": "Tube patch",
			"PCIOL": "Posterior chamber IOL",
			"PeripapillaryAtrophy": "Peripapillary atrophy",
			"PeripheralRetinectomy": "Peripheral retinectomy",
			"PhakoIncision": "Phako incision",
			"PI": "Peripheral iridectomy",
			"PointInLine": "Point in line",
			"PosteriorCapsule": "Posterior capsule",
			"PosteriorEmbryotoxon": "Posterior embryotoxon",
			"PostPole": "Posterior pole",
			"PostSubcapCataract": "Posterior subcapsular cataract",
			"PosteriorRetinectomy": "Posterior retinectomy",
			"PosteriorSynechia": "Posterior synechia",
			"PreRetinalHaemorrhage": "Pre-retinal haemorrhage",
			"PRP": "Panretinal photocoagulation",
			"PRPPostPole": "Panretinal photocoagulation (posterior pole)",
			"Pupil": "Pupil",
			"RadialSponge": "Radial sponge",
			"RetinalArteryOcclusionPostPole": "Retinal artery occlusion",
			"RetinalTouch": "Retinal touch",
			"RetinalVeinOcclusionPostPole": "Retinal vein occluson",
			"Retinoschisis": "Retinoschisis",
			"RK": "Radial keratotomy",
			"RoundHole": "Round hole",
			"RPEDetachment": "RPE detachment",
			"RPERip": "RPE rip",
			"RRD": "Rhegmatogenous retinal detachment",
			"Rubeosis": "Rubeosis iridis",
			"SectorPRP": "Sector PRP",
			"SectorPRPPostPole": "Sector PRP (posterior pole)",
			"ScleralIncision": "Scleral Incision",
			"Sclerostomy": "Sclerostomy",
			"SectorIridectomy": "Sector iridectomy",
			"Shading": "Shading",
			"SidePort": "Side port",
			"Slider": "Slider",
			"StarFold": "Star fold",
			"SubretinalFluid": "Subretinal fluid",
			"SubretinalPFCL": "Subretinal PFCL",
			"Supramid": "Supramid suture",
			"SwollenDisc": "Swollen disc",
			"Telangiectasis": "Parafoveal telangiectasia",
			"Trabectome": "Trabectome",
			"TrabyFlap": "Trabeculectomy flap",
			"TrabySuture": "Trabeculectomy suture",
			"ToricPCIOL": "Toric posterior chamber IOL",
			"TractionRetinalDetachment": "Traction retinal detachment",
			"TransilluminationDefect": "Transillumination defect",
			"UpDrift": "Up drift",
			"UpShoot": "Up shoot",
			"UTear": "Traction ‘U’ tear",
			"Vicryl": "Vicryl suture",
			"ViewObscured": "View obscured",
			"VitreousOpacity": "Vitreous opacity",
			"VPattern": "V pattern",
			"Crepitations": "Crepitations",
			"Stenosis": "Stenosis",
			"Wheeze": "Wheeze",
			"Effusion": "Pleural effusion",
			"LeftCoronaryArtery": "Left coronary artery",
			"DrugStent": "Drug eluting stent",
			"MetalStent": "Metal stent",
			"Bypass": "Coronary artery bypass",
			"Bruit": "Bruit",
			"Bruising": "Bruising",
			"Haematoma": "Haematoma"
		});

		// Anterior segment edit
		ED.init({
			canvasId: "ed_example",
			eye: 0,
			scale: 1,
			idSuffix: "AntSeg",
			isEditable: true,
			focus: false,
			graphicsPath: "../../assets/img/",
			inputId: "ed_example_data",
			onReadyCommandArray: [
				[
					"addDoodle",
					[
						"AntSeg"
					]
				],
				[
					"deselectDoodles",
					[]
				]
			],
			onDoodlesLoadedCommandArray: [],
			bindingArray: {
				AntSeg: {
					pupilSize: {
						id: "eyedraw-field-1",
						attribute: "data-value"
					},
					pxe: {
						id: "field-option-1"
					}
				}
			},
			syncArray: {},
			listenerArray: [
				TestListener
			],
			offsetX: 0,
			offsetY: 0,
			toImage: false
		});
	}());
	</script>

	<script>
	(function() {
		return;
		// Anterior segment view
		ED.init({
			canvasId: 'ed_example_display',
			inputId: 'ed_example_display_input_data',
			eye: 0,
			scale: 1,
			idSuffix: 'AntSegView',
			isEditable: false,
			focus: false,
			graphicsPath: "../../assets/img/",
			onReadyCommandArray: [],
			onDoodlesLoadedCommandArray: [],
			bindingArray: {},
			deleteValueArray: {},
			syncArray: {},
			listenerArray: [],
			offsetX: 0,
			offsetY: 0,
			toImage: false
		});
	}());
	</script>

	<script>
	(function() {
		return;
		// Cataract edit
		ED.init({
			canvasId: 'ed_example_cataract',
			inputId: 'ed_example_cataract_input_data',
			eye: 0,
			scale: 1,
			idSuffix: 'Cataract',
			isEditable: true,
			focus: false,
			graphicsPath: "../../assets/img/",
			onReadyCommandArray: [
				// ['addDoodle', ['AntSeg']],
				['addDoodle', ['PhakoIncision']],
				// ['addDoodle', ['PCIOL']],
				['deselectDoodles', []]
			],
			onDoodlesLoadedCommandArray: [],
			bindingArray: {},
			deleteValueArray: {},
			syncArray: {},
			listenerArray: [],
			offsetX: 10,
			offsetY: 10,
			toImage: false
		});

		// Surgeon synced with cataract
		ED.init({
			canvasId: 'ed_example_surgeon',
			inputId: 'ed_example_surgeon_input_data',
			eye: 0,
			scale: 1,
			idSuffix: 'Position',
			isEditable: true,
			focus: false,
			graphicsPath: "../../assets/img/",
			onReadyCommandArray: [
				['addDoodle', ['OperatingTable']],
				['addDoodle', ['Surgeon']],
				['deselectDoodles', []]
			],
			onDoodlesLoadedCommandArray: [],
			bindingArray: [],
			deleteValueArray: {},
			syncArray: {
				Cataract: {
					Surgeon: {
						PhakoIncision: {
							parameters: ['rotation']
						}
					}
				}
			},
			listenerArray: [],
			offsetX: 10,
			offsetY: 10,
			toImage: false
		});
	}());
	</script>
	<!-- END EYEDRAW INIT -->
</body>
</html>