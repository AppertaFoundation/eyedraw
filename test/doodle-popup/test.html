<!doctype html>
<html>
<head>
	<title>Eyedraw doodle popup menu prototype</title>

	<!-- This is the main OpenEyes stlesheet -->
	<link rel="stylesheet" type="text/css" href="css/style.css" />

	<!-- This is purely used for test/demo purposes -->
	<link rel="stylesheet" type="text/css" href="css/test.css" />

	<!-- The eyedraw widget stylesheet -->
	<link rel="stylesheet" type="text/css" href="../../assets/css/oe-eyedraw.css" />

	<!-- Other dependent scripts -->
	<script type="text/javascript" src="../../assets/components/jquery/jquery.min.js"></script>

	<!-- Load in the eyedraw scripts -->
	<script>
	(function() {
		// We have to use 'jsonp' here so that we can run this test document on the
		// file:// protocol (ie, without the use of a webserver)
		window.scriptsLoadCallback = function(obj) {
			obj.files.forEach(function(file) {
				// We use document.write to force the files to be loaded synchronously.
				document.write('<script src="../../src/' + file + '"><\/script>');
			});
		};
	}(this));
	</script>
	<script type="text/javascript" src="./js/scripts.jsonp"></script>
	<!-- End loading in eyedraw scripts -->
</head>
<body>
	<div class="container main" role="main">
		<div class="container content">
			<div class="large-12 column event edit">
				<header class="event-header">
					<ul class="inline-list tabs event-actions">
						<li class="selected">
							<a href="#">Create</a>
						</li>
					</ul>
				</header>
				<div class="event-content" id="event-content">
					<h2 class="event-title">Event title</h2>
					<section class="element Element_OphCiExamination_AnteriorSegment">
						<header class="element-header">
							<h3 class="element-title">Anterior Segment (edit mode)</h3>
						</header>
						<div class="element-fields element-eyes row">
							<div class="element-eye right-eye column side left" data-side="right">

									<!-- EYEDRAW WIDGET START -->
									<div class="eyedraw-widget anterior-segment" id="eyedrawwidget_example" data-options='{
										"drawingName": "ed_example",
										"canvasId": "ed_example",
										"eye": 0,
										"scale": 1,
										"idSuffix": "",
										"isEditable": true,
										"focus": false,
										"graphicsPath": "../../assets/img/",
										"inputId": "ed_example_data",
										"onReadyCommandArray": [
											[
												"addDoodle",
												[
													"AntSeg"
												]
											],
											[
												"deselectDoodles",
												[]
											]
										],
										"onDoodlesLoadedCommandArray": [],
										"bindingArray": {
											"AntSeg": {
												"pupilSize": {
													"id": "eyedraw-field-1",
													"attribute": "data-value"
												},
												"pxe": {
													"id": "field-option-1"
												}
											}
										},
										"syncArray": [],
										"listenerArray": [],
										"offsetX": 0,
										"offsetY": 0,
										"toImage": false
									}'>

										<!-- TOOLBAR START -->
										<div class="eyedraw-toolbar">

											<!-- PANEL START -->
											<ul class="eyedraw-toolbar-panel">
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="NuclearCataract">
														<span class="icon-ed-NuclearCataract"></span>
														<span class="label">Nuclear cataract</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="CorticalCataract">
														<span class="icon-ed-CorticalCataract"></span>
														<span class="label">Cortical cataract</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PostSubcapCataract">
														<span class="icon-ed-PostSubcapCataract"></span>
														<span class="label">Posterior subcapsular cataract</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PCIOL">
														<span class="icon-ed-PCIOL"></span>
														<span class="label">Posterior chamber IOL</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="ACIOL">
														<span class="icon-ed-ACIOL"></span>
														<span class="label">Anterior chamber IOL</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="Bleb">
														<span class="icon-ed-Bleb"></span>
														<span class="label">Trabeculectomy bleb</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PI">
														<span class="icon-ed-PI"></span>
														<span class="label">Peripheral iridectomy</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="Fuchs">
														<span class="icon-ed-Fuchs"></span>
														<span class="label">Fuchs endothelial dystrophy</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="RK">
														<span class="icon-ed-RK"></span>
														<span class="label">Radial keratotomy</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="LasikFlap">
														<span class="icon-ed-LasikFlap"></span>
														<span class="label">LASIK flap</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="CornealScar">
														<span class="icon-ed-CornealScar"></span>
														<span class="label">Corneal scar</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="SectorIridectomy">
														<span class="icon-ed-SectorIridectomy"></span>
														<span class="label">Sector iridectomy</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PosteriorSynechia">
														<span class="icon-ed-PosteriorSynechia"></span>
														<span class="label">Posterior synechia</span>
													</a>
												</li>
											</ul>
											<!-- PANEL END -->

											<!-- PANEL START -->
											<!--
											<ul class="eyedraw-toolbar-panel">
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="NuclearCataract">
														<img src="../../assets/img/NuclearCataract.gif" />
														<span class="label">Nuclear cataract</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="CorticalCataract">
														<img src="../../assets/img/CorticalCataract.gif" />
														<span class="label">Cortical cataract</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PostSubcapCataract">
														<img src="../../assets/img/PostSubcapCataract.gif" />
														<span class="label">Posterior subcapsular cataract</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PCIOL">
														<img src="../../assets/img/PCIOL.gif" />
														<span class="label">Posterior chamber IOL</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="ACIOL">
														<img src="../../assets/img/ACIOL.gif" />
														<span class="label">Anterior chamber IOL</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="Bleb">
														<img src="../../assets/img/Bleb.gif" />
														<span class="label">Trabeculectomy bleb</span>
													</a>
												</li>
												<li>
													<a class="eyedraw-button" href="#" data-function="addDoodle" data-arg="PI">
														<img src="../../assets/img/PI.gif" />
														<span class="label">Peripheral iridectomy</span>
													</a>
												</li>
												<li class="drawer">
													<a class="eyedraw-button" href="#">
														<img src="../../assets/img/more.gif" />
														<span class="label">More...</span>
													</a>
													<ul>
														<li>
															<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="Fuchs">
																<img src="../../assets/img/Fuchs.gif" />
																<span class="label">Fuchs endothelial dystrophy</span>
															</a>
														</li>
														<li>
															<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="RK">
																<img src="../../assets/img/RK.gif" />
																<span class="label">Radial keratotomy</span>
															</a>
														</li>
														<li>
															<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="LasikFlap">
																<img src="../../assets/img/LasikFlap.gif" />
																<span class="label">LASIK flap</span>
															</a>
														</li>
														<li>
															<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="CornealScar">
																<img src="../../assets/img/CornealScar.gif" />
																<span class="label">Corneal scar</span>
															</a>
														</li>
														<li>
															<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="SectorIridectomy">
																<img src="../../assets/img/SectorIridectomy.gif" />
																<span class="label">Sector iridectomy</span>
															</a>
														</li>
														<li>
															<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="PosteriorSynechia">
																<img src="../../assets/img/PosteriorSynechia.gif" />
																<span class="label">Posterior synechia</span>
															</a>
														</li>
														<li>
															<a class="eyedraw-button" href="" data-function="addDoodle" data-arg="Rubeosis">
																<img src="../../assets/img/Rubeosis.gif" />
																<span class="label">Rubeosis iridis</span>
															</a>
														</li>
													</ul>
												</li>
											</ul>
											-->
											<!-- PANEL END-->
										</div>
										<!-- TOOLBAR END -->

										<div class="eyedraw-body">
											<div class="row">

												<div class="fixed column eyedraw-editor">

													<!-- CANVAS -->
													<canvas
													id="ed_example"
													class="ed_canvas_edit"
													width="300"
													height="300"
													tabindex="1">
													</canvas>

													<!-- TOOLTIP -->
													<span class="eyedraw-canvas-tooltip" id="ed_exampleTooltip"></span>

													<!-- SELECTED DOODLE -->
													<div class="eyedraw-selected-doodle">
														<label for="ed_example_selected_doodle">
															Currently Selected
														</label>
														<div class="selected">
															<select id="ed_example_selected_doodle">>
																<option>None</option>
															</select>
														</div>
													</div>

													<!-- DATA FIELD -->
													<input
														type="hidden"
														id="ed_example_data"
														value='' />
												</div>

												<div class="fluid column eyedraw-fields">

													<!-- FIELD ROW -->
													<div class="field-row">
														<label for="eyedraw-field-1">
															Field 1:
														</label>
														<div class="row">
															<div class="large-8 column">
																<select name="field" id="eyedraw-field-1">
																	<option data-value="Large">Large</option>
																	<option data-value="Medium">Medium</option>
																	<option data-value="Small">Small</option>
																</select>
															</div>
														</div>
													</div>
													<!-- FIELD ROW -->
													<div class="field-row">
														<label for="eyedraw-field-2">
															Field 2:
														</label>
														<div class="row">
															<div class="large-8 column">
																<select name="field" id="eyedraw-field-2">
																	<option>Large</option>
																	<option>Medium</option>
																	<option>Small</option>
																</select>
															</div>
														</div>
													</div>
													<!-- FIELD ROW -->
													<div class="field-row">
														<label for="eyedraw-field-3">
															Field 3:
														</label>
														<textarea rows="2" id="eyedraw-field-3"></textarea>
													</div>
													<!-- FIELD ROW -->
													<fieldset class="field-row">
														<label>
															<input type="checkbox" id="field-option-1" /> Option 1
														</label>
														<label>
															<input type="checkbox" id="field-option-2" /> Option 2
														</label>
													</fieldset>
													<!-- FIELD ROW -->
													<div class="field-row">
														<button class="small">Report</button>
														<button class="small">Clear</button>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="element-eye left-eye column side right" data-side="left">
									<div class="data-row">
										<div class="data-value">
											<p><strong>Notes:</strong></p>
											<ul>
												<li>All required markup has to be present on the page.</li>
												<li>The EyeDraw classes are instantiated via a global 'eyeDrawInit' function, which then instantiates the following:
													<ul>
														<li>An eyedraw Drawing</li>
														<li>An eyedraw controller (the controller handles user and Drawing events)</li>
														<li>Other event based and collection classes (this can be improved and simplified)</li>
													</ul>
												</li>
												<li>Toolbar actions are routed to the eyedraw instance via inline JS, this can be improved.</li>
												<li>
													EyeDraw fields are bound to the drawing via the <code>bindingArray</code> option.
													<ul>
														<li><em>Field 1</em> and <em>Option 1</em> are currently bound to the EyeDraw in this example.</li>
													</ul>
												</li>
												<li>There's an obvious coupling between the markup in the page (and thus PHP), the inline JavaScript and the external EyeDraw JavaScript.</li>
											</ul>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
		</div>
	</div>

	<!-- EYEDRAW INIT -->
	<script>
	(function() {
		$('.eyedraw-widget').each(function(i, elem) {
			elem = $(elem);
			eyeDrawInit(elem.data('options'), elem);
		});
	}());
	</script>
	<!-- END EYEDRAW INIT -->
</body>
</html>