<!doctype html>
<html>
<head>
	<title>Eyedraw doodle popup menu prototype</title>

	<!-- This is the main OpenEyes stlesheet -->
	<link rel="stylesheet" type="text/css" href="css/style.css" />

	<!-- This is purely used for test/demo purposes -->
	<link rel="stylesheet" type="text/css" href="css/test.css" />

	<!-- The eyedraw widget stylesheet -->
	<link rel="stylesheet" type="text/css" href="../../assets/css/oe-eyedraw.css" id="ed-stylesheet" />

	<style type="text/css">
		.container {
			max-width: 1000px;
			margin-top: 10px;
		}
		#icons {
			margin-bottom: 18px;
		}
		.icon-example {
			border: 1px solid #ddd;
			padding: 2px;
			margin: 4px;
			position: relative;
		}
		.show-centre .icon-example {
			border-color: #07f801;
		}
		.show-centre .icon-example:before {
			content: "";
			position: absolute;
			background: #07f801;
			width: 100%;
			height: 1px;
			top: 50%;
			left: 0;
		}
		.show-centre .icon-example:after {
			content: "";
			position: absolute;
			background: #07f801;
			width: 1px;
			height: 100%;
			top: 0;
			left: 50%;
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="box generic">
			<h2>EyeDraw Icons</h2>
			<div id="icons">
				<!-- icons to go here -->
			</div>
			<p>
				<button id="show-centres" class="small">Toggle icon centres</button>
			</p>
		</div>
	</div>
	<script>
	(function toggleIconCentres() {
		var container = document.getElementById('icons');
		var button = document.getElementById('show-centres');
		button.addEventListener('click', function() {
			container.className = /show-centre/.test(container.className) ? '' : 'show-centre';
		}, false);
	}());

	(function createIconSpans(container) {

		function toArray(list) {
			return Array.prototype.slice.call(list);
		}

		var container = document.getElementById('icons');

		var styleSheet = toArray(document.styleSheets).filter(function(ss) {
			return ss.ownerNode.id === 'ed-stylesheet';
		})[0];

		// Here we simply loop through the stylesheet rules, filter out the icon
		// selectors, and create <span> elements with classes that match the selectors.
		var html = toArray(styleSheet.cssRules).filter(function(rule) {
			return /^\.ed-icon/.test(rule.selectorText) && !/:/.test(rule.selectorText)
		}).map(function(rule) {
			var className = rule.selectorText.replace(/[\.,]/g, '');
			return '<span class="icon-example ' + className + '" title=".' + className + '"></span>';
		}).join('');

		container.innerHTML = html;

	}());
	</script>
</body>
</html>